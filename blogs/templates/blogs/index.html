{% extends "base.html" %}

{% block content %}

<style>
    .page-title {
        text-align: center;
        color: var(--grass-green);
        margin-bottom: 30px;
        font-size: 2rem;
        text-shadow: 2px 2px var(--cyan-light);
    }

    /* --- åšæ–‡å¡ç‰‡æ ·å¼ --- */
    .post-card {
        background-color: var(--white);
        border-radius: 20px;
        /* ä½¿ç”¨åŒé‡è¾¹æ¡†æ¨¡æ‹Ÿæ³¢æµªæˆ–ç¼çº«æ•ˆæœ */
        border: 4px dashed var(--mint-light); 
        padding: 25px;
        margin-bottom: 25px;
        position: relative;
        box-shadow: 0 5px 0 rgba(152, 251, 152, 0.5); /* ç¡¬é˜´å½±ï¼Œæ›´æœ‰å¡é€šæ„Ÿ */
        
        /* åˆå§‹çŠ¶æ€ï¼šé€æ˜ä¸”ä¸‹ç§»ï¼Œä¸ºåŠ¨ç”»åšå‡†å¤‡ */
        opacity: 0;
        transform: translateY(50px);
        animation: slideUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }

    /* é¼ æ ‡æ‚¬åœæ•ˆæœï¼šæ™ƒåŠ¨ + è¾¹æ¡†å˜è‰² */
    .post-card:hover {
        border-color: var(--grass-green);
        box-shadow: 0 8px 0 rgba(50, 205, 50, 0.3);
        animation: shake 0.5s ease-in-out; /* æ³¨æ„ï¼šè¿™é‡Œä¼šè¦†ç›–æ‰ slideUpï¼Œæ‰€ä»¥ä»…hoverè§¦å‘ */
        animation-fill-mode: none; /* é˜²æ­¢æ™ƒåŠ¨åçŠ¶æ€å¡æ­» */
        opacity: 1; /* ä¿æŒå¯è§ */
        transform: translateY(0); /* ä¿æŒä½ç½® */
    }

    /* --- åŠ¨ç”»å®šä¹‰ --- */
    @keyframes slideUp {
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes shake {
        0% { transform: rotate(0deg); }
        25% { transform: rotate(1deg); }
        50% { transform: rotate(0deg); }
        75% { transform: rotate(-1deg); }
        100% { transform: rotate(0deg); }
    }

    /* æ ‡é¢˜æ ·å¼ */
    .card-title {
        color: var(--dark-green);
        font-size: 1.4rem;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    /* ä¿¡æ¯æ  */
    .card-meta {
        font-size: 0.85rem;
        color: #88c;
        background: var(--cyan-light);
        display: inline-block;
        padding: 4px 12px;
        border-radius: 15px;
        margin-bottom: 15px;
    }

    .card-text {
        line-height: 1.6;
        color: #555;
    }

    /* ç³–æœæŒ‰é’® */
    .btn-read-more, .btn-edit {
        display: inline-block;
        margin-top: 15px;
        padding: 8px 25px;
        background: linear-gradient(to bottom, #fff, var(--mint-bg));
        border: 2px solid var(--mint-light);
        border-radius: 50px;
        color: var(--grass-green);
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.2s;
    }

    .btn-read-more:hover {
        background: var(--mint-light);
        color: var(--white);
        box-shadow: 0 0 10px var(--mint-light);
    }
    
    .btn-edit {
        border-color: #ffd700;
        color: #daa520;
    }
    .btn-edit:hover {
        background: #ffd700;
        color: #fff;
    }
</style>

<h2 class="page-title">ğŸƒ æœ€æ–°æ—¥è®° ğŸƒ</h2>

{% for post in posts %}
    <!-- ä½¿ç”¨ style åŠ¨æ€è®¡ç®—åŠ¨ç”»å»¶è¿Ÿï¼Œå½¢æˆçº§è”æ•ˆæœ -->
    <div class="post-card" style="animation-delay: {{ forloop.counter0|add:1 }}00ms">
        <h3 class="card-title">ğŸŒ¿ {{ post.title }}</h3>
        
        <div class="card-meta">
            ğŸ‘¤ {{ post.author.username }} &nbsp;|&nbsp; ğŸ•’ {{ post.date_added|date:"Y-m-d" }}
        </div>
        
        <div class="card-text">
            {{ post.text|linebreaks|truncatechars:80 }}
        </div>

        <!-- è£…é¥°æ€§åˆ†å‰²çº¿ -->
        <div style="margin-top:10px; border-top: 2px dotted #eee;"></div>

        <a href="#" class="btn-read-more">ğŸ¬ ç‚¹å‡»æŸ¥çœ‹å…¨æ–‡</a>
        
        {% if user == post.author %}
            <a href="{% url 'blogs:edit_blog' post.id %}" class="btn-edit">âœï¸ ä¿®æ”¹</a>
        {% endif %}
    </div>
{% empty %}
    <div class="post-card" style="text-align: center; color: #999;">
        <p>ğŸ‚ è¿™é‡Œç©ºç©ºå¦‚ä¹Ÿï¼Œå¿«å»ç§ä¸‹ç¬¬ä¸€ç¯‡æ—¥è®°å§ï¼</p>
    </div>
{% endfor %}

{% endblock content %}